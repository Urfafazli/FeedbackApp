{"ast":null,"code":"import _toConsumableArray from\"/Users/urfaansari/Desktop/REACT/Ui/feedback-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/urfaansari/Desktop/REACT/Ui/feedback-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/urfaansari/Desktop/REACT/Ui/feedback-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/urfaansari/Desktop/REACT/Ui/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var FeedbackContext=/*#__PURE__*/createContext();export var FeedbackProvider=function FeedbackProvider(_ref){var children=_ref.children;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),feedback=_useState4[0],setFeedback=_useState4[1];var _useState5=useState({item:{},edit:false}),_useState6=_slicedToArray(_useState5,2),feedbackEdit=_useState6[0],setFeedbackEdit=_useState6[1];// Fetch feedback\nvar fetchFeedback=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/feedback?_sort=id&_order=desc\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setFeedback(data);setIsLoading(false);case 8:case\"end\":return _context.stop();}},_callee);}));return function fetchFeedback(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchFeedback();},[]);// Add feedback\nvar addFeedback=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(newFeedback){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/feedback',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newFeedback)});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;setFeedback([data].concat(_toConsumableArray(feedback)));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function addFeedback(_x){return _ref3.apply(this,arguments);};}();// Delete feedback\nvar deleteFeedback=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!window.confirm('Are you sure you want to delete?')){_context3.next=4;break;}_context3.next=3;return fetch(\"/feedback/\".concat(id),{method:'DELETE'});case 3:setFeedback(feedback.filter(function(item){return item.id!==id;}));case 4:case\"end\":return _context3.stop();}},_callee3);}));return function deleteFeedback(_x2){return _ref4.apply(this,arguments);};}();// Update feedback item\nvar updateFeedback=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id,updItem){var response,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"/feedback/\".concat(id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(updItem)});case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:data=_context4.sent;// NOTE: no need to spread data and item\nsetFeedback(feedback.map(function(item){return item.id===id?data:item;}));// FIX: this fixes being able to add a feedback after editing\n// credit to Jose https://www.udemy.com/course/react-front-to-back-2022/learn/lecture/29768200#questions/16462688\nsetFeedbackEdit({item:{},edit:false});case 8:case\"end\":return _context4.stop();}},_callee4);}));return function updateFeedback(_x3,_x4){return _ref5.apply(this,arguments);};}();// Set item to be updated\nvar editFeedback=function editFeedback(item){setFeedbackEdit({item:item,edit:true});};return/*#__PURE__*/_jsx(FeedbackContext.Provider,{value:{feedback:feedback,feedbackEdit:feedbackEdit,isLoading:isLoading,deleteFeedback:deleteFeedback,addFeedback:addFeedback,editFeedback:editFeedback,updateFeedback:updateFeedback},children:children});};export default FeedbackContext;","map":{"version":3,"names":["createContext","useState","useEffect","jsx","_jsx","FeedbackContext","FeedbackProvider","_ref","children","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","feedback","setFeedback","_useState5","item","edit","_useState6","feedbackEdit","setFeedbackEdit","fetchFeedback","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","json","stop","apply","arguments","addFeedback","_ref3","_callee2","newFeedback","_callee2$","_context2","method","headers","body","JSON","stringify","concat","_toConsumableArray","_x","deleteFeedback","_ref4","_callee3","id","_callee3$","_context3","window","confirm","filter","_x2","updateFeedback","_ref5","_callee4","updItem","_callee4$","_context4","map","_x3","_x4","editFeedback","Provider","value"],"sources":["/Users/urfaansari/Desktop/REACT/Ui/feedback-app/src/context/FeedbackContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from 'react'\n\nconst FeedbackContext = createContext()\n\nexport const FeedbackProvider = ({ children }) => {\n  const [isLoading, setIsLoading] = useState(true)\n  const [feedback, setFeedback] = useState([])\n  const [feedbackEdit, setFeedbackEdit] = useState({\n    item: {},\n    edit: false,\n  })\n\n\n\n  // Fetch feedback\n  const fetchFeedback = async () => {\n    const response = await fetch(`/feedback?_sort=id&_order=desc`)\n    const data = await response.json()\n\n    setFeedback(data)\n    setIsLoading(false)\n  }\n  useEffect(() => {\n    fetchFeedback()\n  }, []);\n\n  // Add feedback\n  const addFeedback = async (newFeedback) => {\n    const response = await fetch('/feedback', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(newFeedback),\n    })\n\n    const data = await response.json()\n\n    setFeedback([data, ...feedback])\n  }\n\n  // Delete feedback\n  const deleteFeedback = async (id) => {\n    if (window.confirm('Are you sure you want to delete?')) {\n      await fetch(`/feedback/${id}`, { method: 'DELETE' })\n\n      setFeedback(feedback.filter((item) => item.id !== id))\n    }\n  }\n\n  // Update feedback item\n  const updateFeedback = async (id, updItem) => {\n    const response = await fetch(`/feedback/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(updItem),\n    })\n\n    const data = await response.json()\n\n    // NOTE: no need to spread data and item\n    setFeedback(feedback.map((item) => (item.id === id ? data : item)))\n\n    // FIX: this fixes being able to add a feedback after editing\n    // credit to Jose https://www.udemy.com/course/react-front-to-back-2022/learn/lecture/29768200#questions/16462688\n    setFeedbackEdit({\n      item: {},\n      edit: false,\n    })\n  }\n\n  // Set item to be updated\n  const editFeedback = (item) => {\n    setFeedbackEdit({\n      item,\n      edit: true,\n    })\n  }\n\n  return (\n    <FeedbackContext.Provider\n      value={{\n        feedback,\n        feedbackEdit,\n        isLoading,\n        deleteFeedback,\n        addFeedback,\n        editFeedback,\n        updateFeedback,\n      }}\n    >\n      {children}\n    </FeedbackContext.Provider>\n  )\n}\n\nexport default FeedbackContext"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}