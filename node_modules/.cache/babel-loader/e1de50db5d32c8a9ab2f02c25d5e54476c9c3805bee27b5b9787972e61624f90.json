{"ast":null,"code":"import _slicedToArray from\"/Users/urfaansari/Desktop/REACT/Ui/feedback-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from'react';import RatingSelect from'./RatingSelect';import Card from'./shared/Card';import Button from'./shared/Button';import FeedbackContext from'../context/FeedbackContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),btnDisabled=_useState6[0],setBtnDisabled=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);// NOTE: This should be checking input value not state as state won't be the updated value until the next render of the component\n// prettier-ignore\nvar handleTextChange=function handleTextChange(_ref){var value=_ref.target.value;// ðŸ‘ˆ  get the value\nif(value===''){setBtnDisabled(true);setMessage(null);// prettier-ignore\n}else if(value.trim().length<5){// ðŸ‘ˆ check for less than 5\nsetMessage('Text must be at least 5 characters');setBtnDisabled(true);}else{setMessage(null);setBtnDisabled(false);}setText(value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>5){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}// NOTE: reset to default state after submission\nsetBtnDisabled(true);// ðŸ‘ˆ  add this line to reset disabled\nsetRating(10);//ðŸ‘ˆ add this line to set rating back to 10\nsetText('');}};// NOTE: pass selected to RatingSelect so we don't need local duplicate state\nreturn/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:setRating,selected:rating}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["useState","useContext","useEffect","RatingSelect","Card","Button","FeedbackContext","jsx","_jsx","jsxs","_jsxs","FeedbackForm","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","rating","setRating","_useState5","_useState6","btnDisabled","setBtnDisabled","_useState7","_useState8","message","setMessage","_useContext","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","_ref","value","target","trim","length","handleSubmit","e","preventDefault","newFeedback","id","children","onSubmit","select","selected","className","onChange","type","placeholder","isDisabled"],"sources":["/Users/urfaansari/Desktop/REACT/Ui/feedback-app/src/components/FeedbackForm.jsx"],"sourcesContent":["import { useState, useContext, useEffect } from 'react'\nimport RatingSelect from './RatingSelect'\nimport Card from './shared/Card'\nimport Button from './shared/Button'\nimport FeedbackContext from '../context/FeedbackContext'\n\nfunction FeedbackForm() {\n  const [text, setText] = useState('')\n  const [rating, setRating] = useState(10)\n  const [btnDisabled, setBtnDisabled] = useState(true)\n  const [message, setMessage] = useState('')\n\n  const { addFeedback, feedbackEdit, updateFeedback } =\n    useContext(FeedbackContext)\n\n  useEffect(() => {\n    if (feedbackEdit.edit === true) {\n      setBtnDisabled(false)\n      setText(feedbackEdit.item.text)\n      setRating(feedbackEdit.item.rating)\n    }\n  }, [feedbackEdit])\n\n  // NOTE: This should be checking input value not state as state won't be the updated value until the next render of the component\n\n  // prettier-ignore\n  const handleTextChange = ({ target: { value } }) => { // ðŸ‘ˆ  get the value\n    if (value === '') {\n      setBtnDisabled(true)\n      setMessage(null)\n      \n  // prettier-ignore\n    } else if (value.trim().length < 5) { // ðŸ‘ˆ check for less than 5\n      setMessage('Text must be at least 5 characters')\n      setBtnDisabled(true)\n    } else {\n      setMessage(null)\n      setBtnDisabled(false)\n    }\n    setText(value)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    if (text.trim().length > 5) {\n      const newFeedback = {\n        text,\n        rating,\n      }\n\n      if (feedbackEdit.edit === true) {\n        updateFeedback(feedbackEdit.item.id, newFeedback)\n      } else {\n        addFeedback(newFeedback)\n      }\n\n      // NOTE: reset to default state after submission\n      setBtnDisabled(true) // ðŸ‘ˆ  add this line to reset disabled\n      setRating(10) //ðŸ‘ˆ add this line to set rating back to 10\n      setText('')\n    }\n  }\n\n  // NOTE: pass selected to RatingSelect so we don't need local duplicate state\n  return (\n    <Card>\n      <form onSubmit={handleSubmit}>\n        <h2>How would you rate your service with us?</h2>\n        <RatingSelect select={setRating} selected={rating} />\n        <div className='input-group'>\n          <input\n            onChange={handleTextChange}\n            type='text'\n            placeholder='Write a review'\n            value={text}\n          />\n          <Button type='submit' isDisabled={btnDisabled}>\n            Send\n          </Button>\n        </div>\n\n        {message && <div className='message'>{message}</div>}\n      </form>\n    </Card>\n  )\n}\n\nexport default FeedbackForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}